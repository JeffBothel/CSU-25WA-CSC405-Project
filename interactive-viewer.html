<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>CSC405 - Final Project - Interactive Viewer</title>
        <script type="text/javascript" src="timeInfo.js"></script> <!-- Added to produce a time stamp on the page. -->
        <!-- Code that brought in from course materials. Code provided from https://interactivecomputergraphics.com/Code/11/ -->
        <script type="text/javascript" src="../Common/initShaders.js"></script>
        <script type="text/javascript" src="../Common/MVnew.js"></script>
        <script type="text/javascript" src="interactive-viewer-vertices.js"></script>
        <script type="text/javascript" src="interactive-viewer-patches.js"></script>
        <script type="text/javascript" src="interactive-viewer-teapot4.js"></script>
        <script id="vertex-shader" type="x-shader/x-vertex">
            #version 300 es

            in vec4 aPosition;
            in vec4 aNormal;
            out vec4 vColor;

            uniform vec4 ambientProduct, diffuseProduct, specularProduct;
            uniform mat4 modelViewMatrix;
            uniform mat4 projectionMatrix;
            uniform vec4 lightPosition;
            uniform float shininess;
            uniform mat3 normalMatrix;

            void main()
            {

                vec3 pos = (modelViewMatrix * aPosition).xyz;
                vec3 light = lightPosition.xyz;
                vec3 L = normalize( light - pos );


                vec3 E = normalize( -pos );
                vec3 H = normalize( L + E );

                // Transform vertex normal into eye coordinates

                vec3 N = normalize( normalMatrix*aNormal.xyz);

                // Compute terms in the illumination equation
                vec4 ambient = ambientProduct;

                float Kd = max( dot(L, N), 0.0 );
                vec4  diffuse = Kd*diffuseProduct;

                float Ks = pow( max(dot(N, H), 0.0), shininess );
                vec4  specular = Ks * specularProduct;

                if( dot(L, N) < 0.0 ) {
                    specular = vec4(0.0, 0.0, 0.0, 1.0);
                }

                gl_Position = projectionMatrix * modelViewMatrix * aPosition;

                vColor = ambient + diffuse +specular;

                vColor.a = 1.0;


            }
        </script>
        <script id="fragment-shader" type="x-shader/x-fragment">
            #version 300 es

            precision mediump float;

            in vec4 vColor;
            out vec4 fColor;

            void
            main()
            {
                fColor = vColor;
            }
        </script>
        <!-- End of code block adapted from https://interactivecomputergraphics.com/Code/11/ -->
    </head>
    <body>
        <h1>CSC405 - Final Project - Interactive Viewer</h1>
        <div id="datetime"></div> <!-- Added to produce a time stamp on the page. -->           
        <div name="gl-canvas">
            <canvas id="gl-canvas" width="800" height="800">
                Your browser does not support the HTML5 canvas tag.
            </canvas>
        </div>
        <div>
            <button id="color-red">Red</button>
            <button id="color-green">Green</button>
            <button id="color-blue">Blue</button>
            <button id="color-yellow">Yellow</button>
        </div>
    </body>
</html>